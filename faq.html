
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Frequently Asked Questions &#8212; astrolabe  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Technical Design: Testing Drivers Against Atlas Planned Maintenance" href="technical-design.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="frequently-asked-questions">
<h1>Frequently Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Permalink to this headline">¶</a></h1>
<section id="why-do-i-keep-seeing-atlasauthenticationerror-401-unauthorized-errors-while-trying-to-use-astrolabe">
<h2>Why do I keep seeing <code class="docutils literal notranslate"><span class="pre">AtlasAuthenticationError:</span> <span class="pre">401:</span> <span class="pre">Unauthorized.</span></code> errors while trying to use <code class="docutils literal notranslate"><span class="pre">astrolabe</span></code>?<a class="headerlink" href="#why-do-i-keep-seeing-atlasauthenticationerror-401-unauthorized-errors-while-trying-to-use-astrolabe" title="Permalink to this headline">¶</a></h2>
<p>Applications can only be granted programmatic access to MongoDB Atlas using an
<a class="reference external" href="https://docs.atlas.mongodb.com/configure-api-access/#programmatic-api-keys">API key</a>. If you are
seeing <code class="docutils literal notranslate"><span class="pre">401:</span> <span class="pre">Unauthorized</span></code> error codes from MongoDB Atlas, it means that you have either
not provided an API key, or that the API key that you have provided is has expired. Please
see the <a class="reference external" href="https://docs.atlas.mongodb.com/">MongoDB Atlas API</a> documentation for instructions on
how to create programmatic API keys.</p>
<p>You also need a set of API keys with Atlas global operator permissions,
referred to as admin credentials.</p>
<p><code class="docutils literal notranslate"><span class="pre">astrolabe</span></code> can be configured to use API keys in one of 2 ways:</p>
<ul>
<li><p>Using the <cite>-u/–username</cite> and <cite>-p/–password</cite> command options:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ astrolabe -u &lt;publicKey&gt; -p &lt;privateKey&gt; --atlas-admin-api-username &lt;publicKey&gt; --atlas-admin-api-password &lt;privateKey&gt; check-connection
</pre></div>
</div>
</li>
<li><p>Using the <code class="docutils literal notranslate"><span class="pre">ATLAS_API_USERNAME</span></code>, <code class="docutils literal notranslate"><span class="pre">ATLAS_API_PASSWORD</span></code>,
<code class="docutils literal notranslate"><span class="pre">ATLAS_ADMIN_API_USERNAME</span></code>, <code class="docutils literal notranslate"><span class="pre">ATLAS_ADMIN_API_PASSWORD</span></code> environment variables:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ATLAS_API_USERNAME=&lt;publicKey&gt; ATLAS_API_PASSWORD=&lt;privateKey&gt; ATLAS_ADMIN_API_USERNAME=&lt;publicKey&gt; ATLAS_ADMIN_API_PASSWORD=&lt;privateKey&gt; astrolabe check-connection
</pre></div>
</div>
</li>
</ul>
</section>
<section id="why-should-we-use-the-custom-ubuntu1804-drivers-atlas-testing-distro">
<span id="faq-why-custom-distro"></span><h2>Why should we use the custom <code class="docutils literal notranslate"><span class="pre">ubuntu1804-drivers-atlas-testing</span></code> distro?<a class="headerlink" href="#why-should-we-use-the-custom-ubuntu1804-drivers-atlas-testing-distro" title="Permalink to this headline">¶</a></h2>
<p>MongoDB Atlas restricts the number of clusters in an Atlas Project to 25. Since
<a class="reference external" href="https://github.com/mongodb-labs/drivers-atlas-testing">this project</a> runs the entire
build matrix in its in
<a class="reference external" href="https://github.com/mongodb-labs/drivers-atlas-testing/blob/master/.evergreen/config.yml">evergreen configuration</a>
under a single Atlas project, it often ends up running into this limitation which causes
hard-to-diagnose test failures (see <a class="reference external" href="https://github.com/mongodb-labs/drivers-atlas-testing/issues/45">#45</a>,
<a class="reference external" href="https://github.com/mongodb-labs/drivers-atlas-testing/issues/46">#46</a>, and
<a class="reference external" href="https://github.com/mongodb-labs/drivers-atlas-testing/issues/45">#48</a>). To mitigate this issue,
we need to limit the number of concurrent builds in the
<a class="reference external" href="https://evergreen.mongodb.com/waterfall/drivers-atlas-testing">drivers-atlas-testing</a> Evergreen project to less
than 25. Evergreen does not currently have a way to enforce such a limit, so instead we have created this
custom distro which is limited to 25 hosts. While not foolproof, this workaround helps avoid the aforementioned
failures in most usage scenarios.</p>
</section>
<section id="what-is-the-purpose-of-the-astrolabe-executor-startup-time-environment-variable">
<span id="faq-why-startup-time"></span><h2>What is the purpose of the <code class="docutils literal notranslate"><span class="pre">ASTROLABE_EXECUTOR_STARTUP_TIME</span></code> environment variable?<a class="headerlink" href="#what-is-the-purpose-of-the-astrolabe-executor-startup-time-environment-variable" title="Permalink to this headline">¶</a></h2>
<p>This test framework’s architecture (see <a class="reference internal" href="technical-design.html#astrolabe-architecture"><span class="std std-ref">Architecture Overview</span></a>) delegates the responsibilities of
invoking the workload executor as well as starting the Atlas planned maintenance to <code class="docutils literal notranslate"><span class="pre">astrolabe</span></code>. Since
the workload executor is run in a subprocess, there is no straightforward way for <code class="docutils literal notranslate"><span class="pre">astrolabe</span></code> to ascertain
whether a workload executor is in the process of initialization or if it is, in fact, already running operations
against the test cluster. This limitation, when combined with a workload executor that runs particularly slowly
can result in failures, e.g.:</p>
<ul class="simple">
<li><p>The maintenance completes and <code class="docutils literal notranslate"><span class="pre">astrolabe</span></code> terminates the workload executor before it can run any operations.</p></li>
<li><p>The workload executor only starts running operations when cluster maintenance is already underway.</p></li>
</ul>
<p>To avoid this situation, users can set the <code class="docutils literal notranslate"><span class="pre">ASTROLABE_EXECUTOR_STARTUP_TIME</span></code> environment variable to a value
greater than the number of seconds it takes their workload executor to start. When this value is set, <code class="docutils literal notranslate"><span class="pre">astrolabe</span></code>
will wait for <code class="docutils literal notranslate"><span class="pre">ASTROLABE_EXECUTOR_STARTUP_TIME</span></code> seconds before implementing the maintenance plan thereby avoiding
the aforementioned issues.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">astrolabe</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installing-running-locally.html">Installing and Running Locally</a></li>
<li class="toctree-l1"><a class="reference internal" href="integration-guide.html">Integration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="spec-workload-executor.html">Workload Executor Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="spec-test-format.html">Atlas Planned Maintenance Test Scenario Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="technical-design.html">Technical Design: Testing Drivers Against Atlas Planned Maintenance</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#why-do-i-keep-seeing-atlasauthenticationerror-401-unauthorized-errors-while-trying-to-use-astrolabe">Why do I keep seeing <code class="docutils literal notranslate"><span class="pre">AtlasAuthenticationError:</span> <span class="pre">401:</span> <span class="pre">Unauthorized.</span></code> errors while trying to use <code class="docutils literal notranslate"><span class="pre">astrolabe</span></code>?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#why-should-we-use-the-custom-ubuntu1804-drivers-atlas-testing-distro">Why should we use the custom <code class="docutils literal notranslate"><span class="pre">ubuntu1804-drivers-atlas-testing</span></code> distro?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#what-is-the-purpose-of-the-astrolabe-executor-startup-time-environment-variable">What is the purpose of the <code class="docutils literal notranslate"><span class="pre">ASTROLABE_EXECUTOR_STARTUP_TIME</span></code> environment variable?</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="technical-design.html" title="previous chapter">Technical Design: Testing Drivers Against Atlas Planned Maintenance</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, MongoDB, Inc..
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/faq.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>